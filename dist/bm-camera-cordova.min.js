/*
 * @blinkmobile/camera: v0.0.3 | https://github.com/blinkmobile/camera
 * (c) 2017 BlinkMobile | Released under the ISC license
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.bmCameraFactory=t()}(this,function(){"use strict";function e(){this.availableDevices=[{deviceId:Camera.Direction.BACK,label:"Rear Camera"},{deviceId:Camera.Direction.FRONT,label:"Front Camera"}],this.defaultConstraints={cameraDirection:Camera.Direction.BACK,quality:50,destinationType:Camera.DestinationType.FILE_URI,encodingType:Camera.EncodingType.PNG,sourceType:Camera.PictureSourceType.CAMERA,correctOrientation:!0},i.set(this,{result:null})}function t(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return i.unshift(null),new(e.bind.apply(e,i))}var i=new WeakMap;return e.prototype.getDevices=function(){return Promise.resolve(this.availableDevices)},e.prototype.useDevice=function(e){if(!("deviceId"in e))throw new TypeError("Invalid device selected, must be of type MediaDeviceInfo");this.defaultConstraints.cameraDirection=e.deviceId},e.prototype.open=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultConstraints;return t=Object.assign({},this.defaultConstraints,t),new Promise(function(n,r){var a=function(t){i.get(e).result=t,n(t)};navigator.camera.getPicture(a,r,t)})},e.prototype.getPicture=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultConstraints,t=i.get(this);return t.result?Promise.resolve(t.result):this.open(e).then(function(){var e=t.result;return t.result=null,e})},t});